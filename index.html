<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <link rel="stylesheet" href="fonts/stylesheet.css">
    <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Doto:wght@100..900&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Doto:wght@100..900&family=Silkscreen:wght@400;700&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <title>Six Flags Goal Progress</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
     
        @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html {
            height: 100%;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        body {
            height: 100%;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            flex-direction: column;
            background: linear-gradient(to right, #000428, #000428);
            font-family: sans-serif;
            font-size: 18px;
        }

        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(to right, #000428, #000428); 
            z-index: -2;
        }

        .bg-video {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 100vw;
            height: 100vh;
            transform: translate(-50%, -50%);
            object-fit: contain; 
            z-index: -1;
        }

      
        .navbar {
            
        }

        .logo-img {
    height: 90px; /* Restrict logo height */
    width: 140px; /* Restrict logo width */
    position: relative; /* Enable position adjustments */
    left: -50px; /* Shift the logo left on larger screens */
}

/* Adjustments for smaller screens */
@media (max-width: 576px) {
    .logo-img {
        left: 0; /* Remove left offset on small devices */
        margin-left: auto; /* Center align the logo */
        margin-right: auto; /* Center align the logo */
        display: block; /* Ensure proper centering */
    }
}




        .nav-link {
            color: white !important;
            font-weight: bold;
            font-size: 16px;
        }

        .nav-link:hover {
            color: #1463F3 !important;
        }

  
        .main-content {
    text-align: center;
    margin-top: 5%;
    z-index: 2;
    margin-bottom: 450px;
    color: #f2f2f2;
    padding-right: 100px;
    
}

@media only screen and (max-width: 768px) {
    .main-content {
        margin-top: 200px;
        margin-bottom: -300px;
        padding-right: 0px;
    }
}

.range {
    position: relative;
    background-color: #333;
    width: 300px;
    height: 30px;
    transform: skew(30deg);
    font-family: 'Orbitron', monospace;
}

.range::before {
    --width: calc(var(--p) * 1%);
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 100%;
    background-color: #F3E600;
    z-index: 0;
    animation: load .5s forwards linear;
}

.range-text {
    color: #000;
    position: absolute;
    left: 5%;
    top: 50%;
    transform: translateY(-50%) skewX(-30deg);
    z-index: 1;
    font-family: 'Orbitron', monospace;
    font-size: 16px;
}

@media only screen and (max-width: 768px) {
    .range-text {
        font-size: 14px;
        left: 8%; /* Adjust for mobile */
    }
}

@keyframes load {
    to {
        width: var(--width);
    }
}


@keyframes load {
    to {
        width: var(--width);
    }
}

        .main-content h1 {
            font-size: 48px; 
            font-family: 'mouserregular';
           letter-spacing: 2px;
            font-weight: bolder;
            
            
        }

        .main-content p {
            font-size: 18px;
            opacity: 0.8;
            margin-bottom: 10px;
            font-family: 'mouserregular';
            letter-spacing: 2px;
           
        }

      
        .range {
            position: relative;
            background-color: #cecece;
            width: 300px;
            height: 30px;
            transform: skew(30deg);
            font-family: 'Orbitron', monospace;
            margin: 10px auto;
            margin-top: 30px;
          
        }
        
        .range::before {
            --width: calc(var(--p) * 1%);
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: #00ff08;
            z-index: 0;
            animation: load .5s forwards linear, glitch 2s infinite linear;
        }
        
        .range-text {
            color: #000;
            position: absolute;
            font-weight: bolder;
            left: 5%;
            top: 50%;
            transform: translateY(-50%) skewX(-30deg);
            z-index: 1;
        }

        .range__label {
            transform: skew(-30deg) translateY(-100%);
            line-height: 1.5;
        }

        @keyframes load {
            to {
                width: var(--width);
            }
        }

        @keyframes glitch {
            0%, 5% {
                transform: translate(0, 0);
            }
            1% {
                transform: translate(-5%, -10%);
            }
            2% {
                transform: translate(10%, 30%);
            }
            3%{
                transform: translate(-43%, 10%);
            }
            4% {
                transform: translate(2%, -23%);
            }
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .main-content h1 {
                font-size: 2px;
                font-size:medium;

                
            }
            .main-content p  {
                font-size: 2px;
                font-size:small;

                
            }
        }
        :root {
  --color: #fff;
  --duration: 2s;
  --size: 5em;
  --line-width: 0.125em;
  --cart-count: 3;
  --cart-delay: 0.1s;
  --cart-size: 0.5em;
}

@keyframes loop {
  0% {
    left: calc(var(--cart-size) / -2);
  }
  15% {
    left: calc(var(--size) / 2 - var(--cart-size) / 2);
    transform: rotate(0deg);
  }
  85% {
    left: calc(var(--size) / 2 - var(--cart-size) / 2);
    transform: rotate(-360deg);
  }
  100% {
    left: var(--size);
    transform: rotate(-360deg);
  }
}

body {
  margin: 0;
  background-color: #1d2a30;
  color: #3c6070;
}

#preloader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: #000000;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.5s ease, visibility 0.5s ease;
}

#preloader.fade-out {
  opacity: 0;
  visibility: hidden;
}

.loadercoaster {
  position: relative;
  height: var(--size);
  width: var(--size);
  margin: 1em auto 0;
  overflow: hidden;
}

.loadercoaster:before,
.loadercoaster:after {
  box-sizing: border-box;
  content: "";
  display: block;
  position: absolute;
}

.loadercoaster:before {
  background-color: var(--color);
  height: var(--line-width);
  bottom: 0;
  width: var(--size);
}

.loadercoaster:after {
  border: var(--line-width) solid var(--color);
  border-radius: 50%;
  bottom: 0;
  left: 50%;
  height: var(--size);
  margin-left: calc(var(--size) / -2);
  width: var(--size);
}

.loadercoaster__cart {
  border-radius: 50%;
  animation: loop var(--duration) linear infinite;
  background-color: var(--color);
  height: var(--cart-size);
  width: var(--cart-size);
  left: calc(var(--cart-size) / -2);
  position: absolute;
  bottom: var(--line-width);
  transform-origin: 50% calc((var(--size) / 2 - var(--line-width) - var(--cart-size)) * -1);
}

.loadercoaster__cart:nth-child(1) {
  animation-delay: calc(var(--cart-delay) * 1);
}

.loadercoaster__cart:nth-child(2) {
  animation-delay: calc(var(--cart-delay) * 2);
}

.loadercoaster__cart:nth-child(3) {
  animation-delay: calc(var(--cart-delay) * 3);
}

.wrapper h1, .wrapper h2, .wrapper p {
  color: var(--color);
  margin: 20px;
  text-align: center;
  font-family: "Silkscreen", sans-serif;
}



    </style>
</head>
<body>

   
    <div class="bg-gradient"></div>

    
    <video id="bg-video" class="bg-video" autoplay muted loop playsinline>
        <source src="assets/initial.mp4" type="video/mp4">
    </video>

  
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="assets/output-onlinetools.png" alt="Logo" class="img-fluid logo-img">
    
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <!-- <li class="nav-item">
                        <a class="nav-link" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contact</a>
                    </li> -->
                </ul>
            </div>
        </div>
    </nav>

    <!-- Central Content -->
    <div class="main-content">
        <h1>Procurement Synergy</h1>
        <h1>Savings Goal</h1>
        <div class="range" id="custom-progress-bar" style="--p: 0;">
            <div class="range-text" id="progress-text">0%</div>
        </div>
        <p class="progress-label">Current Progress: <span id="current-value">$3,000,000</span> / $23,000,000</p>
    </div>
  
    <div id="preloader" class="wrapper">
        <h1>Procurement Synergy Savings Goal</h1>
        <h2>Loading something great!</h2>
        <p></p>
        
        <div class="loadercoaster">
          <div class="loadercoaster__cart"></div>
          <div class="loadercoaster__cart"></div>
          <div class="loadercoaster__cart"></div>
        </div>
      </div>
    <!-- Include confetti library -->
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
    
    <audio id="celebration-sound" src="assets/celebration.mp3" preload="auto"></audio>

      <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-analytics.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";
        import { onSnapshot } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBXwENPHzB-FfGxXIardKQDWGdgIzs5OnA",
            authDomain: "adminpanel6flags.firebaseapp.com",
            projectId: "adminpanel6flags",
            storageBucket: "adminpanel6flags.firebasestorage.app",
            messagingSenderId: "693595279762",
            appId: "1:693595279762:web:303f5404ed33447b93714b",
            measurementId: "G-DF4QKY7DRV"
        };
    
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
      
        // Goal and initial values
        const goal = 23000000;
        let gathered = 12000000; // Initial value, will be updated from Firestore
      
        // Get DOM elements
        const customProgressBar = document.getElementById('custom-progress-bar');
        const progressText = document.getElementById('progress-text');
        const bgVideo = document.getElementById('bg-video');
        const celebrationSound = document.getElementById('celebration-sound');

      
        // Video sources for the progress milestones
        const videoSources = [
            "assets/0-5.mp4", "assets/5-10.mp4", "assets/10-15.mp4",
            "assets/15-20.mp4", "assets/20-25.mp4", "assets/25-30.mp4",
            "assets/30-35.mp4", "assets/35-40.mp4", "assets/40-45.mp4", "assets/45-50.mp4", "assets/50-55.mp4",
            "assets/55-60.mp4", "assets/60-65.mp4", "assets/65-70.mp4", "assets/70-75.mp4",
            "assets/75-80.mp4", "assets/80-85.mp4", "assets/85-90.mp4", "assets/90-95.mp4", "assets/95-100.mp4", "assets/95-100.mp4"
        ];
    
        // Function to update progress bar and background video based on gathered value
        function updateProgress() {
            const progressPercentage = Math.min((gathered / goal) * 100, 100);
            customProgressBar.style.setProperty('--p', progressPercentage);  // Update progress bar CSS
            progressText.innerText = Math.round(progressPercentage) + '%';  // Update percentage text
            document.getElementById('current-value').innerText = '$' + gathered.toLocaleString();  // Update monetary value with commas
      
            // Update background video based on the percentage
            const videoIndex = Math.floor(progressPercentage / 5);  // Each video represents a 5% range
            if (videoIndex < videoSources.length) {
                bgVideo.src = videoSources[videoIndex];
                bgVideo.load();
                bgVideo.play();
            }

            // Trigger celebration if goal is reached
            if (progressPercentage >= 100) {
                startCelebration();
            }
        }
    // Function to start the celebration
    function startCelebration() {
    celebrationSound.play(); // Play celebration sound
    startFireworks();
    startSchoolPride();
    startStarConfetti();
}

// Function for fireworks effect
function startFireworks() {
    const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

    function randomInRange(min, max) {
        return Math.random() * (max - min) + min;
    }

    setInterval(function() {
        const particleCount = 50;

        confetti(
            Object.assign({}, defaults, {
                particleCount,
                origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 },
            })
        );
        confetti(
            Object.assign({}, defaults, {
                particleCount,
                origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 },
            })
        );
    }, 250); // Fireworks every 250ms
}

// Function for school pride effect
function startSchoolPride() {
    const colors = ["#bb0000", "#ffffff"];

    function frame() {
        confetti({
            particleCount: 2,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
            colors: colors,
        });

        confetti({
            particleCount: 2,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
            colors: colors,
        });

        requestAnimationFrame(frame);
    }

    frame(); // Start the school pride effect
}

// Function for star confetti effect
function startStarConfetti() {
    setInterval(function() {
        confetti({
            particleCount: 5, // Adjust the number of stars emitted per interval
            angle: Math.random() * 360,
            spread: Math.random() * 50 + 50, // Random spread between 50 and 100
            origin: {
                x: Math.random(), // Random x position
                y: Math.random() - 0.2 // Random y position, slightly above the bottom
            },
            shapes: ['star'], // Use star shape
            colors: ['gold'] // Use a gold color for stars
        });
    }, 100); // Emit stars every 100ms
}
        // Fetch 'gathered' value from Firestore
        async function fetchGatheredValue() {
            const userDoc = doc(db, "users", "1j82r8nb8ZTkRvUbi2en");  // Change to your actual document ID
            const docSnap = await getDoc(userDoc);
    
            if (docSnap.exists()) {
                let fetchedGathered = docSnap.data().user;  // Assuming the field is named 'user'
                fetchedGathered = fetchedGathered.replace(/,/g, '');  // Remove commas if any
                gathered = parseInt(fetchedGathered, 10);  // Convert to number
                updateProgress();  // Update progress after gathering data
            } else {
                console.error("No such document!");
            }
        }
    
        // Window load event
        window.addEventListener('load', function() {
            const preloader = document.getElementById('preloader');
            preloader.classList.add('fade-out');  // Fade out preloader
    
            // Hide preloader after a short delay and then fetch data from Firestore
            setTimeout(function() {
                preloader.style.display = 'none';
                fetchGatheredValue();  // Fetch and update the progress based on Firebase data
            }, 500);
        });

        // Function to listen for changes in the 'gathered' value from Firestore
async function listenForGatheredValue() {
    const userDoc = doc(db, "users", "1j82r8nb8ZTkRvUbi2en"); // Change to your actual document ID

    // Set up a real-time listener
    onSnapshot(userDoc, (docSnap) => {
        if (docSnap.exists()) {
            let fetchedGathered = docSnap.data().user; // Assuming the field is named 'user'
            fetchedGathered = fetchedGathered.replace(/,/g, ''); // Remove commas if any
            gathered = parseInt(fetchedGathered, 10); // Convert to number
            updateProgress(); // Update progress after gathering data
        } else {
            console.error("No such document!");
        }
    });
}

// Window load event
window.addEventListener('load', function() {
    const preloader = document.getElementById('preloader');
    preloader.classList.add('fade-out'); // Fade out preloader

    // Hide preloader after a short delay and then start listening for updates from Firestore
    setTimeout(function() {
        preloader.style.display = 'none';
        listenForGatheredValue(); // Start listening for updates
    }, 500);
});
    </script>
    
      

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.min.js"></script>

</body>
</html>
